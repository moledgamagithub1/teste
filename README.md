# My Star Wars API
A little REST CRUD API that consumes Star Wars API (https://swapi.dev/).

Application for study purposes.


# Table of contents

- [Introduction](#introduction)
- [Technologies](#technologies)
- [Compilation](#compilation)
- [Web Interfaces](#web-interfaces)
- [Security](#security)
- [API Documentation - Version: 1.0](#api-documentation---version-10)
  - [/auth](#auth)
    - [POST](#post)
  - [/v1/people](#v1people)
    - [GET](#get)
    - [POST](#post)
  - [/v1/people/create-many](#v1peoplecreate-many)
    - [POST](#post)
  - [/v1/people/{id}](#v1peopleid)
    - [GET](#get)
    - [PUT](#put)
    - [DELETE](#delete)
  - [/v1/swapi/planets](#v1swapiplanets)
    - [GET](#get)
  - [Models](#models)
    - [ApiError](#apierror)
    - [ApiFieldError](#apifielderror)
    - [InputPerson](#inputperson)
    - [LoginForm](#loginform)
    - [Pageable](#pageable)
    - [Page«Person»](#pageperson)
    - [Person](#person)
    - [Planet](#planet)
    - [Sort](#sort)
    - [Token](#token)

## Introduction


## Technologies
    Java 8
    Spring Framework (Boot, Web, Cache, Data, Security/JWT)
    H2 In-Memory Database
    JUnit Jupiter
	Swagger / Spring-fox
	Maven

## Compilation
    $ spring-boot:run

## Web Interfaces
After start the application, you can access:

Swagger interface - http://localhost:8080/starwars-api/swagger-ui.html

Web console for H2 database - http://localhost:8080/starwars-api/h2		

## Security
There are two roles and users that can be used for restricted operations:

| Role | User | Password | 
| ---- | ---------- | ----------- |
| ADMIN | userAdmin1 | 123456 |
| USER | user1 | 123456 |

## API Documentation - Version: 1.0

Documentation generated by swagger-markdown

### /auth

#### POST
##### Summary

Generate an authentication token

##### Description

Insert a generated token into a protected resource

##### Parameters

| Name | Located in | Description | Required | Schema |
| ---- | ---------- | ----------- | -------- | ---- |
| Authorization | header | Header para Token JWT | No | string |
| form | body | form | Yes | [LoginForm](#loginform) |

##### Responses

| Code | Description | Schema |
| ---- | ----------- | ------ |
| 200 | Success | [Token](#token) |
| 400 | Bad Request |  |
| 500 | Internal Server Error |  |

### /v1/people

#### GET
##### Summary

List all people

##### Parameters

| Name | Located in | Description | Required | Schema |
| ---- | ---------- | ----------- | -------- | ---- |
| Authorization | header | Header para Token JWT | No | string |
| offset | query |  | No | long |
| pageNumber | query |  | No | integer |
| pageSize | query |  | No | integer |
| paged | query |  | No | boolean |
| sort.sorted | query |  | No | boolean |
| sort.unsorted | query |  | No | boolean |
| unpaged | query |  | No | boolean |

##### Responses

| Code | Description | Schema |
| ---- | ----------- | ------ |
| 200 | OK | [Page«Person»](#page«person») |
| 500 | Internal Server Error | [ApiError](#apierror) |

#### POST
##### Summary

Create a person

##### Parameters

| Name | Located in | Description | Required | Schema |
| ---- | ---------- | ----------- | -------- | ---- |
| Authorization | header | Header para Token JWT | No | string |
| person | body | person | Yes | [InputPerson](#inputperson) |

##### Responses

| Code | Description | Schema |
| ---- | ----------- | ------ |
| 200 | OK | object |
| 201 | Created | object |
| 400 | Bad Request | [ApiError](#apierror) |
| 403 | Access Denied. Please authenticate first to get a valid token. Only USER or ADMIN roles are permitted. |  |
| 500 | Internal Server Error | [ApiError](#apierror) |

### /v1/people/create-many

#### POST
##### Summary

Create many people

##### Parameters

| Name | Located in | Description | Required | Schema |
| ---- | ---------- | ----------- | -------- | ---- |
| Authorization | header | Header para Token JWT | No | string |
| people | body | people | Yes | [ [InputPerson](#inputperson) ] |

##### Responses

| Code | Description | Schema |
| ---- | ----------- | ------ |
| 200 | OK | object |
| 201 | Created | object |
| 400 | Bad Request | [ApiError](#apierror) |
| 403 | Access Denied. Please authenticate first to get a valid token. Only ADMIN role is permitted. |  |
| 500 | Internal Server Error | [ApiError](#apierror) |

### /v1/people/{id}

#### GET
##### Summary

Find a person by id

##### Parameters

| Name | Located in | Description | Required | Schema |
| ---- | ---------- | ----------- | -------- | ---- |
| Authorization | header | Header para Token JWT | No | string |
| id | path | id | Yes | long |

##### Responses

| Code | Description | Schema |
| ---- | ----------- | ------ |
| 200 | OK | object |
| 400 | Bad Request | [ApiError](#apierror) |
| 404 | Not Found |  |
| 500 | Internal Server Error | [ApiError](#apierror) |

#### PUT
##### Summary

Update a person

##### Parameters

| Name | Located in | Description | Required | Schema |
| ---- | ---------- | ----------- | -------- | ---- |
| Authorization | header | Header para Token JWT | No | string |
| id | path | id | Yes | long |
| person | body | person | Yes | [InputPerson](#inputperson) |

##### Responses

| Code | Description | Schema |
| ---- | ----------- | ------ |
| 200 | Successfully Updated | object |
| 400 | Bad Request | [ApiError](#apierror) |
| 403 | Access Denied. Please authenticate first to get a valid token. Only USER or ADMIN roles are permitted. |  |
| 404 | Not Found |  |
| 500 | Internal Server Error | [ApiError](#apierror) |

#### DELETE
##### Summary

Delete a person

##### Parameters

| Name | Located in | Description | Required | Schema |
| ---- | ---------- | ----------- | -------- | ---- |
| Authorization | header | Header para Token JWT | No | string |
| id | path | id | Yes | long |

##### Responses

| Code | Description | Schema |
| ---- | ----------- | ------ |
| 200 | OK | object |
| 204 | Successfully Deleted | object |
| 403 | Access Denied. Please authenticate first to get a valid token. Only ADMIN role is permitted. |  |
| 404 | Not Found |  |
| 500 | Internal Server Error | [ApiError](#apierror) |

### /v1/swapi/planets

#### GET
##### Summary

List all planets

##### Description

This operation gets all planets from swapi API. Use a planet of this list into homeworld field when inserting or updating a person resource

##### Parameters

| Name | Located in | Description | Required | Schema |
| ---- | ---------- | ----------- | -------- | ---- |
| Authorization | header | Header para Token JWT | No | string |

##### Responses

| Code | Description | Schema |
| ---- | ----------- | ------ |
| 200 | OK | [ [Planet](#planet) ] |
| 500 | Internal Server Error | [ApiError](#apierror) |

### Models

#### ApiError

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| debugMessage | string |  | No |
| errors | [ [ApiFieldError](#apifielderror) ] |  | No |
| message | string |  | No |
| status | string | _Enum:_ `"100 CONTINUE"`, `"101 SWITCHING_PROTOCOLS"`, `"102 PROCESSING"`, `"103 CHECKPOINT"`, `"200 OK"`, `"201 CREATED"`, `"202 ACCEPTED"`, `"203 NON_AUTHORITATIVE_INFORMATION"`, `"204 NO_CONTENT"`, `"205 RESET_CONTENT"`, `"206 PARTIAL_CONTENT"`, `"207 MULTI_STATUS"`, `"208 ALREADY_REPORTED"`, `"226 IM_USED"`, `"300 MULTIPLE_CHOICES"`, `"301 MOVED_PERMANENTLY"`, `"302 FOUND"`, `"302 MOVED_TEMPORARILY"`, `"303 SEE_OTHER"`, `"304 NOT_MODIFIED"`, `"305 USE_PROXY"`, `"307 TEMPORARY_REDIRECT"`, `"308 PERMANENT_REDIRECT"`, `"400 BAD_REQUEST"`, `"401 UNAUTHORIZED"`, `"402 PAYMENT_REQUIRED"`, `"403 FORBIDDEN"`, `"404 NOT_FOUND"`, `"405 METHOD_NOT_ALLOWED"`, `"406 NOT_ACCEPTABLE"`, `"407 PROXY_AUTHENTICATION_REQUIRED"`, `"408 REQUEST_TIMEOUT"`, `"409 CONFLICT"`, `"410 GONE"`, `"411 LENGTH_REQUIRED"`, `"412 PRECONDITION_FAILED"`, `"413 PAYLOAD_TOO_LARGE"`, `"413 REQUEST_ENTITY_TOO_LARGE"`, `"414 URI_TOO_LONG"`, `"414 REQUEST_URI_TOO_LONG"`, `"415 UNSUPPORTED_MEDIA_TYPE"`, `"416 REQUESTED_RANGE_NOT_SATISFIABLE"`, `"417 EXPECTATION_FAILED"`, `"418 I_AM_A_TEAPOT"`, `"419 INSUFFICIENT_SPACE_ON_RESOURCE"`, `"420 METHOD_FAILURE"`, `"421 DESTINATION_LOCKED"`, `"422 UNPROCESSABLE_ENTITY"`, `"423 LOCKED"`, `"424 FAILED_DEPENDENCY"`, `"425 TOO_EARLY"`, `"426 UPGRADE_REQUIRED"`, `"428 PRECONDITION_REQUIRED"`, `"429 TOO_MANY_REQUESTS"`, `"431 REQUEST_HEADER_FIELDS_TOO_LARGE"`, `"451 UNAVAILABLE_FOR_LEGAL_REASONS"`, `"500 INTERNAL_SERVER_ERROR"`, `"501 NOT_IMPLEMENTED"`, `"502 BAD_GATEWAY"`, `"503 SERVICE_UNAVAILABLE"`, `"504 GATEWAY_TIMEOUT"`, `"505 HTTP_VERSION_NOT_SUPPORTED"`, `"506 VARIANT_ALSO_NEGOTIATES"`, `"507 INSUFFICIENT_STORAGE"`, `"508 LOOP_DETECTED"`, `"509 BANDWIDTH_LIMIT_EXCEEDED"`, `"510 NOT_EXTENDED"`, `"511 NETWORK_AUTHENTICATION_REQUIRED"` | No |
| timestamp | string | _Example:_ `"dd-MM-yyyy hh:mm:ss"` | No |

#### ApiFieldError

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| field | string |  | No |
| message | string |  | No |

#### InputPerson

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| birth_year | string |  | No |
| gender | string |  | No |
| height | integer |  | No |
| homeworld | string |  | No |
| mass | integer |  | No |
| name | string |  | No |

#### LoginForm

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| password | string |  | No |
| username | string |  | No |

#### Pageable

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| offset | long |  | No |
| pageNumber | integer |  | No |
| pageSize | integer |  | No |
| paged | boolean |  | No |
| sort | [Sort](#sort) |  | No |
| unpaged | boolean |  | No |

#### Page«Person»

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| content | [ [Person](#person) ] |  | No |
| empty | boolean |  | No |
| first | boolean |  | No |
| last | boolean |  | No |
| number | integer |  | No |
| numberOfElements | integer |  | No |
| pageable | [Pageable](#pageable) |  | No |
| size | integer |  | No |
| sort | [Sort](#sort) |  | No |
| totalElements | long |  | No |
| totalPages | integer |  | No |

#### Person

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| birth_year | string |  | No |
| filmsExhibitions | integer |  | No |
| gender | string |  | No |
| height | integer |  | No |
| homeworld | string |  | No |
| id | long |  | No |
| mass | integer |  | No |
| name | string |  | No |

#### Planet

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| name | string |  | No |

#### Sort

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| empty | boolean |  | No |
| sorted | boolean |  | No |
| unsorted | boolean |  | No |

#### Token

| Name | Type | Description | Required |
| ---- | ---- | ----------- | -------- |
| token | string |  | No |
| type | string |  | No |
